
model {
  # Priors for population-level effects
  sigma ~ dnorm(0, 1/(SDY)^2) T(0, )
  int_1 ~ dt(0, 1/(3*SDY)^2, 3) 
  ok_x_1 ~ dt(0, 1/(SDY/(MAXX-MINX))^2, 3) 
  cp_0 = -10^100  # mcp helper value; minus infinity
  cp_1 = 10^100  # mcp helper value; plus infinity


  # Model and likelihood
  for (i_ in 1:length(ok_x)) {

    # Fitted value
    y_[i_] = 

      # Segment 1: y ~ ok_x
      (ok_x[i_] >= cp_0) * int_1 + 
      (ok_x[i_] >= cp_0) * (ok_x_1 * (min(ok_x[i_], cp_1))) 

    # Likelihood and log-density for family = gaussian()
    y[i_] ~ dnorm(y_[i_], 1 / sigma^2)
    loglik_[i_] = logdensity.norm(y[i_], y_[i_], 1 / sigma^2)
  }
}